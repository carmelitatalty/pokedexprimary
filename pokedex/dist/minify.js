let pokemonRepository=function(){let t=[],e=1,a=150,n=0;return{getAll:function(){return t},loadPagedList:function o(l=1,i=150){return e=l,fetch(`https://pokeapi.co/api/v2/pokemon/?offset=${e}&limit=${a=i}`).then(function(t){return t.json()}).then(function(e){n=e.count,t=[],e.results.forEach(function(e){let a={name:e.name,detailsUrl:e.url};t.push(a)})}).catch(function(t){console.error(t)})},getOffset:function(){return e},getLimit:function(){return a},getTotalCount:function(){return n}}}(),pokemonUI=function(){let t=0;return{addListItem:function t(e){let a=document.createElement("li");a.classList.add("list-group-item");let n=document.createElement("button");n.setAttribute("type","button"),n.setAttribute("data-toggle","modal"),n.setAttribute("data-target","#exampleModal"),n.setAttribute("data-pokemon-name",e.name),n.setAttribute("data-pokemon-url",e.detailsUrl),n.classList.add("btn"),n.classList.add("btn-primary"),n.classList.add("text-capitalize"),n.innerText=`${e.name}`,a.appendChild(n);let o=$("#pokemon-list"),l=$('<div class="poke-item"></div>'),i=$(`<button type="button" class="img-fluid poke-button btn btn-link" data-toggle="modal"
       data-target="#exampleModal" data-pokemon-name="${e.name}"
        data-pokemon-url="${e.detailsUrl}"></button>`);l.append(i);let p=$(`<img class="img-fluid pokeball" src="img/pokeball.svg" alt="${e.name}" />`);i.append(p);let d=$(`<div class="pokeball-name text-capitalize text-center">${e.name}</div>`);i.append(d),o.append(l)},loadUpdatedMenu:function e(){let a=$("#paging-list"),n=$('<li class="btn btn-light page-item page-link" id="paging-prev">Previous</a></li>');n.on("click",function(){pokemonApp.loadPrev()}),a.append(n);let o=pokemonRepository.getTotalCount(),l=pokemonRepository.getOffset(),i=pokemonRepository.getLimit(),p=1,d=function(t){pokemonApp.loadPokemon(t.data.pageNumber,i)};for(;l<o;){let r=p,s=l+i;s>o&&(s=o);let m=$(`<li class="btn btn-light page-item page-link"
       id="paging-${p}">${p++}</li>`);a.append(m),m.on("click",{pageNumber:r},d),l+=i}t=p;let u=$('<li class="btn btn-light page-item page-link" id="paging-next">Next</li>');u.on("click",function(){pokemonApp.loadNext()}),a.append(u)},loadUpdatedList:function(){$(".list-group").empty(),$("#pokemon-list").empty();pokemonRepository.getAll().forEach(function(t){pokemonUI.addListItem(t)})},updateMenuPage:function e(a){console.log(`Update page to ${a}`);let n=$("#paging-prev");if(1===a)n.addClass("disabled");else{n.removeClass("disabled");let o=a-1;n.attr("data-page",o),n.data("page",o)}let l=$("#paging-next");if(a===t-1)l.addClass("disabled");else{l.removeClass("disabled");let i=a+1;l.attr("data-page",i),l.data("page",i)}for(let p=1;p<t+1;p++){let d=$(`#paging-${p}`);p===a?d.addClass("active"):d.removeClass("active")}}}}(),pokemonApp=function(){let t=!1,e=function(e=1,a=150){let n=(e-1)*a;console.log(`Loading pokemon ${e} ${n}: ${a}`),pokemonRepository.loadPagedList(n,a).then(()=>{pokemonUI.loadUpdatedList(),t||(pokemonUI.loadUpdatedMenu(),t=!0),pokemonUI.updateMenuPage(e)})},a=function(){let t=$("#paging-prev").data("page");console.log(`prev: ${t}`),e(t)},n=function(){let t=$("#paging-next").data("page");console.log(`next: ${t}`),e(t)};return{loadPokemon:e,loadPrev:a,loadNext:n}}();pokemonApp.loadPokemon(),$("#exampleModal").on("show.bs.modal",function(t){var e=$(t.relatedTarget),a=e.data("pokemon-name"),n=e.data("pokemon-url"),o=$(this);o.find(".modal-title").text(""+a);var l=o.find("#pokemon-height");l.text("");var i=o.find("#pokemon-types");i.empty();var p=o.find("#pokemon-img");p.attr("src",""),fetch(n).then(function(t){return t.json()}).then(t=>{var e;let n=t.height/10;l.text(`${n} m`),i.empty(),t.types.forEach(function(t){let e=document.createElement("li");e.innerText=t.type.name,i.append(e)}),p.attr("src",(e=t.sprites).other["official-artwork"].front_default?e.other["official-artwork"].front_default:e.other.dream_world.front_default?e.other.dream_world.front_default:e.front_default?e.front_default:void 0),p.attr("alt",a)})});
